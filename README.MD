# MovieFlix - Web Xem Phim v·ªõi H·ªá th·ªëng G·ª£i √Ω Th√¥ng minh

MovieFlix l√† m·ªôt d·ª± √°n ·ª©ng d·ª•ng web xem phim ho√†n ch·ªânh, ƒë∆∞·ª£c x√¢y d·ª±ng v·ªõi ki·∫øn tr√∫c microservice, bao g·ªìm m·ªôt ·ª©ng d·ª•ng web ch√≠nh v√† m·ªôt API g·ª£i √Ω phim ri√™ng bi·ªát.

- **·ª®ng d·ª•ng Web ch√≠nh (Spring Boot):** Cung c·∫•p giao di·ªán ng∆∞·ªùi d√πng ƒë·ªÉ xem phim, t√¨m ki·∫øm, l·ªçc, ƒëƒÉng nh·∫≠p/ƒëƒÉng k√Ω. T√≠ch h·ª£p m·ªôt trang qu·∫£n tr·ªã m·∫°nh m·∫Ω ƒë·ªÉ qu·∫£n l√Ω t·∫•t c·∫£ c√°c t√†i nguy√™n nh∆∞ phim, th·ªÉ lo·∫°i, di·ªÖn vi√™n, ƒë·∫°o di·ªÖn, v√† ng∆∞·ªùi d√πng.

- **API G·ª£i √Ω (Python Flask):** M·ªôt microservice ƒë·ªôc l·∫≠p s·ª≠ d·ª•ng Machine Learning (TF-IDF v√† Cosine Similarity) ƒë·ªÉ cung c·∫•p c√°c g·ª£i √Ω phim (phim li√™n quan, phim c√° nh√¢n h√≥a) d·ª±a tr√™n n·ªôi dung v√† l·ªãch s·ª≠ xem c·ªßa ng∆∞·ªùi d√πng.


## üèõÔ∏è Ki·∫øn tr√∫c H·ªá th·ªëng

D·ª± √°n bao g·ªìm 2 th√†nh ph·∫ßn ch√≠nh ho·∫°t ƒë·ªông ƒë·ªôc l·∫≠p nh∆∞ng giao ti·∫øp v·ªõi nhau qua API v√† Webhook:

1. **·ª®ng d·ª•ng Web (Java Spring Boot):**

    - L√† "b·ªô n√£o" ch√≠nh c·ªßa h·ªá th·ªëng.

    - X·ª≠ l√Ω x√°c th·ª±c ng∆∞·ªùi d√πng (login/register) v√† ph√¢n quy·ªÅn (user/admin).

    - Cung c·∫•p c√°c trang giao di·ªán cho ng∆∞·ªùi d√πng (trang ch·ªß, xem phim, t√¨m ki·∫øm).

    - Cung c·∫•p trang qu·∫£n tr·ªã (Admin Panel) v·ªõi ƒë·∫ßy ƒë·ªß c√°c ch·ª©c nƒÉng CRUD.

    - Giao ti·∫øp v·ªõi Flask API ƒë·ªÉ l·∫•y danh s√°ch phim g·ª£i √Ω.

    - **G·ª≠i Webhook** ƒë·∫øn Flask API m·ªói khi c√≥ s·ª± thay ƒë·ªïi d·ªØ li·ªáu (th√™m/s·ª≠a/x√≥a phim, di·ªÖn vi√™n,...) ƒë·ªÉ k√≠ch ho·∫°t vi·ªác l√†m m·ªõi cache.

2. **H·ªá th·ªëng G·ª£i √Ω (Python Flask API):**

    - L√† d·ªãch v·ª• chuy√™n bi·ªát cho Machine Learning.

    - Khi kh·ªüi ƒë·ªông, n√≥ t·∫£i to√†n b·ªô d·ªØ li·ªáu phim t·ª´ database, x·ª≠ l√Ω v√† hu·∫•n luy·ªán m·ªôt model TF-IDF.

    - L∆∞u tr·ªØ model v√† d·ªØ li·ªáu ƒë√£ x·ª≠ l√Ω v√†o m·ªôt file cache (`.pkl`) ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô ph·∫£n h·ªìi.

    - Cung c·∫•p c√°c endpoint API ƒë·ªÉ tr·∫£ v·ªÅ danh s√°ch phim g·ª£i √Ω.

    - C√≥ m·ªôt endpoint Webhook ƒë·ªÉ l·∫Øng nghe th√¥ng b√°o t·ª´ ·ª©ng d·ª•ng Spring Boot v√† th·ª±c hi·ªán l√†m m·ªõi cache.


## üõ†Ô∏è C√¥ng ngh·ªá s·ª≠ d·ª•ng

### Backend (·ª®ng d·ª•ng Web ch√≠nh)

- **Ng√¥n ng·ªØ:** Java 17+

- **Framework:** Spring Boot 3+

- **Th√†nh ph·∫ßn:** Spring Web, Spring Security, Spring Data JPA, Thymeleaf

- **Database:** MySQL

- **Build Tool:** Maven ho·∫∑c Gradle


### Backend (H·ªá th·ªëng G·ª£i √Ω)

- **Ng√¥n ng·ªØ:** Python 3.11.9

- **Framework:** Flask

- **Th∆∞ vi·ªán:** Pandas, Scikit-learn, Joblib, mysql-connector-python


### Frontend

- HTML5

- CSS3 & Bootstrap 5

- Thymeleaf (Server-Side Rendering)


## üöÄ H∆∞·ªõng d·∫´n C√†i ƒë·∫∑t v√† Ch·∫°y d·ª± √°n

ƒê·ªÉ ch·∫°y d·ª± √°n n√†y, b·∫°n c·∫ßn kh·ªüi ƒë·ªông c·∫£ hai server: Spring Boot v√† Flask.

### Y√™u c·∫ßu

- JDK 17 ho·∫∑c m·ªõi h∆°n

- Python 3.9 ho·∫∑c m·ªõi h∆°n

- MySQL Server

- Maven

- M·ªôt IDE nh∆∞ IntelliJ (cho Java) v√† VS Code (cho Python)


### B∆∞·ªõc 1: C√†i ƒë·∫∑t C∆° s·ªü d·ªØ li·ªáu

1. T·∫°o m·ªôt database m·ªõi trong MySQL, v√≠ d·ª• t√™n l√† `movie_db`.

2. Ch·∫°y c√°c file SQL ƒë·ªÉ t·∫°o b·∫£ng v√† n·∫°p d·ªØ li·ªáu m·∫´u.


### B∆∞·ªõc 2: Ch·∫°y H·ªá th·ªëng G·ª£i √Ω (Flask API)

1. **Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c c·ªßa Flask API** (v√≠ d·ª•: `.../ml/`).

2. **T·∫°o v√† k√≠ch ho·∫°t m√¥i tr∆∞·ªùng ·∫£o:**

    ```
    python -m venv venv
    # Windows
    venv\Scripts\activate
    # macOS/Linux
    source venv/bin/activate
    ```

3. **C√†i ƒë·∫∑t c√°c th∆∞ vi·ªán c·∫ßn thi·∫øt:**

    ```
    pip install -r requirements.txt
    ```

4. **C·∫•u h√¨nh k·∫øt n·ªëi database:**

    - M·ªü file `mysql_config.py`.

    - C·∫≠p nh·∫≠t c√°c th√¥ng tin `host`, `user`, `password`, `database` cho ƒë√∫ng v·ªõi c·∫•u h√¨nh MySQL c·ªßa b·∫°n.

5. **Ch·∫°y server:**

    ```
    python app.py
    ```

   Server s·∫Ω kh·ªüi ƒë·ªông t·∫°i `http://localhost:5000`. N√≥ s·∫Ω b·∫Øt ƒë·∫ßu t·∫£i d·ªØ li·ªáu t·ª´ DB v√† hu·∫•n luy·ªán model.


### B∆∞·ªõc 3: Ch·∫°y ·ª®ng d·ª•ng Web ch√≠nh (Spring Boot)

1. **Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c g·ªëc c·ªßa d·ª± √°n Spring Boot.**

2. **C·∫•u h√¨nh k·∫øt n·ªëi:**

    - M·ªü file `src/main/resources/application.properties`.

    - C·∫≠p nh·∫≠t c√°c thu·ªôc t√≠nh `spring.datasource.url`, `spring.datasource.username`, `spring.datasource.password` ƒë·ªÉ k·∫øt n·ªëi ƒë·∫øn database `movie_db`.

    - ƒê·∫£m b·∫£o thu·ªôc t√≠nh `recommendation.api.base-url` tr·ªè ƒë√∫ng ƒë·∫øn Flask API:

        ```
        recommendation.api.base-url=http://localhost:5000
        ```

3. **Ch·∫°y ·ª©ng d·ª•ng:**

    - S·ª≠ d·ª•ng IDE c·ªßa b·∫°n (IntelliJ/Eclipse) ƒë·ªÉ ch·∫°y l·ªõp `MovieFlixApplication`.

    - Ho·∫∑c d√πng Maven/Gradle trong terminal:

        ```
        # Maven
        ./mvnw spring-boot:run
        # Gradle
        ./gradlew bootRun
        ```


    Server Spring Boot s·∫Ω kh·ªüi ƒë·ªông t·∫°i `http://localhost:8080`.


### B∆∞·ªõc 4: Truy c·∫≠p ·ª©ng d·ª•ng

- **Trang ng∆∞·ªùi d√πng:** M·ªü tr√¨nh duy·ªát v√† truy c·∫≠p `http://localhost:8080`

- **Trang qu·∫£n tr·ªã:** Truy c·∫≠p `http://localhost:8080/admin`